# Story 3.1: View Brewing Guides

## Status
Ready for Review

## Story
As a logged-in user, I want to browse and view a library of pour-over brewing guides, so that I can learn the correct techniques for different brewers.

## Acceptance Criteria
1. The app has a "Guides" section accessible to logged-in users. [Source: docs/prd/epic-3-learning-guidance.md#story-31-view-brewing-guides] [Source: docs/architecture/frontend-architecture.md#routing-strategy]
2. The "Guides" section displays a list of available pour-over guides (e.g., V60, Chemex). [Source: docs/prd/epic-3-learning-guidance.md#story-31-view-brewing-guides]
3. Clicking on a guide opens a detailed, step-by-step tutorial with visual aids. [Source: docs/prd/epic-3-learning-guidance.md#story-31-view-brewing-guides]
4. Content for at least two initial guides (e.g., V60 and Chemex) is created and available in the app. [Source: docs/prd/epic-3-learning-guidance.md#story-31-view-brewing-guides]

## Tasks / Subtasks
- [x] Frontend: Add "Guides" route and navigation (AC: 1)
  - [x] Add protected route `'/guides'` that renders `BrewingGuidesPage`. [Source: docs/architecture/frontend-architecture.md#routing-strategy]
  - [x] Add "Guides" entry to the main navigation for authenticated users. [Source: docs/architecture/frontend-architecture.md#react-component-hierarchy]
- [x] Frontend: Implement Guides list view (AC: 2)
  - [x] Create `apps/frontend/src/pages/BrewingGuidesPage.tsx` to render a grid/list of `GuideCard` items. [Source: docs/architecture/frontend-architecture.md#react-component-hierarchy]
  - [x] Create `apps/frontend/src/components/GuideCard.tsx` to display guide title, brewer type, short description, and thumbnail.
  - [x] Ensure list supports keyboard navigation and includes `data-testid` hooks for testing. [Source: docs/architecture/development-workflow.md#frontend-testing]
- [x] Frontend: Implement Guide detail view (AC: 3)
  - [x] Add route `'/guides/:slug'` rendering `GuideDetail` to show step-by-step instructions with images. [Source: docs/architecture/frontend-architecture.md#react-component-hierarchy]
  - [x] Use MUI components; include headings for each step, numbered progression, and alt text for images. [Source: docs/architecture/frontend-architecture.md#styling-architecture]
  - [x] Provide breadcrumb or back-link to the guides list.
- [x] Edge Cases and Error States (supports AC: 2, 3)
  - [x] Unknown `:slug` renders Not Found view with a "Back to Guides" link.
  - [x] Empty guides list renders an informative empty state with link to Dashboard/Home.
  - [x] Missing or failed image load shows a fallback thumbnail and retains descriptive `alt` text.
- [x] Content: Provide at least two initial guides (AC: 4)
  - [x] Author content for V60 and Chemex guides with 6–10 clear steps each and associated images.
  - [x] Store guide images under `apps/frontend/public/images/guides/{v60|chemex}/...` and reference from the detail pages. [Source: docs/architecture/source-tree.md]
  - [x] Provide a typed data source (e.g., `apps/frontend/src/pages/guides/guideData.ts`) exporting metadata (title, slug, brewer), intro, and steps (text + optional image path). Do not introduce new libraries. [Source: docs/architecture/tech-stack.md]
- [x] Accessibility and UX (supports AC: 2, 3)
  - [x] Ensure high-quality descriptive `alt` text for every step image; if an image is missing, keep copy-only step content.
  - [x] Maintain correct heading hierarchy and move focus to the page heading on route change (list → detail, and back).
  - [x] Provide `data-testid` markers for list container, guide cards, detail title, and each step for testability. [Source: docs/architecture/development-workflow.md#frontend-testing]
- [x] Tests
  - [x] Unit/component tests for `BrewingGuidesPage` (renders list, V60 and Chemex visible, navigation to detail works). [Source: docs/architecture/development-workflow.md#frontend-testing]
  - [x] Component test for `GuideDetail` (renders steps in order, images have alt text, back navigation present). [Source: docs/architecture/development-workflow.md#frontend-testing]

## Dev Notes
The following is extracted from PRD and Architecture. No assumptions beyond cited sources.

- Routing includes `/guides` under Protected Routes; add `BrewingGuidesPage` and `GuideDetail` components. [Source: docs/architecture/frontend-architecture.md#routing-strategy] [Source: docs/architecture/frontend-architecture.md#react-component-hierarchy]
- Use React + Vite + MUI with Emotion for component styling and responsive layout. [Source: docs/architecture/tech-stack.md] [Source: docs/architecture/frontend-architecture.md#styling-architecture]
- Keep presentational and container responsibilities separate where feasible; consider `GuideCard` as presentational, with page components orchestrating state. [Source: docs/architecture/frontend-architecture.md#component-design-patterns]
- Place new files under `apps/frontend/src/pages` and `apps/frontend/src/components` consistent with the source tree; store static assets in `apps/frontend/public/`. [Source: docs/architecture/source-tree.md]
- No backend API for guides is defined; initial content should be served statically from the frontend without introducing new libraries (e.g., hardcoded TypeScript data and public images). [Source: docs/architecture/api-specification.md]
- State management: Local component state is appropriate for guide list/detail; no global state required. [Source: docs/architecture/frontend-architecture.md#state-management-strategy]
- Accessibility: follow ARIA and keyboard navigation practices; use MUI components that support accessibility by default. [Source: docs/architecture/frontend-architecture.md#component-design-patterns]
 - Dependencies: Relies on existing authenticated routing guards and navigation shell from the Epic 1 auth and layout work. [Source: docs/architecture/frontend-architecture.md#routing-strategy]

### Testing
- Use Jest and React Testing Library for unit/component tests; target list rendering, navigation, and detail step rendering. [Source: docs/architecture/development-workflow.md#frontend-testing]
- Include `data-testid` attributes and deterministic guide data to enable stable assertions. [Source: docs/architecture/development-workflow.md#frontend-testing]
- Place tests alongside components/pages (e.g., `*.test.tsx`). [Source: docs/architecture/development-workflow.md#frontend-testing]

## Change Log
| Date | Version | Description | Author |
| ---- | ------- | ----------- | ------ |
| {{DATE}} | 0.1 | Initial draft for Story 3.1 | Scrum Master |
| {{DATE}} | 1.0 | Implemented Story 3.1 frontend (routes, list/detail, data, tests) | James (Dev) |

## Dev Agent Record
### Agent Model Used
James (Dev)

### Debug Log References
- Frontend tests executed with `npm test '--workspace=apps/frontend' -- --run --silent` — all tests passed.

### Completion Notes List
- Added protected routes `/guides` and `/guides/:slug` with navigation link in header.
- Implemented `BrewingGuidesPage` list with accessible keyboard navigation and test hooks.
- Implemented `GuideDetail` with breadcrumb back-link, numbered steps, images with alt text, and focus management.
- Added typed guide data for V60 and Chemex plus placeholder/thumb images under public assets.
- Wrote component tests for list and detail; all existing and new tests pass locally.

### File List
- Modified: `apps/frontend/src/App.tsx`
- Modified: `apps/frontend/src/components/Header.tsx`
- Added: `apps/frontend/src/components/GuideCard.tsx`
- Added: `apps/frontend/src/pages/BrewingGuidesPage.tsx`
- Added: `apps/frontend/src/pages/GuideDetail.tsx`
- Added: `apps/frontend/src/pages/guides/guideData.ts`
- Added: `apps/frontend/src/pages/BrewingGuidesPage.test.tsx`
- Added: `apps/frontend/src/pages/GuideDetail.test.tsx`
- Added: `apps/frontend/public/images/placeholder.svg`
- Added: `apps/frontend/public/images/guides/v60/thumb.svg`
- Added: `apps/frontend/public/images/guides/chemex/thumb.svg`

## QA Results
_To be completed by QA Agent_
